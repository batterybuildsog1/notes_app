{
  "name": "notes-app",
  "version": "1.0.0",
  "description": "Notes app with CRM-style entity linking for real estate business",
  "baseUrl": "${NOTES_APP_URL}",
  "auth": {
    "type": "api_key",
    "header": "X-API-Key",
    "envVar": "NOTES_API_KEY"
  },
  "tools": [
    {
      "name": "create_note",
      "description": "Create a new note. The note will be automatically enriched with entity extraction (people, companies, projects).",
      "endpoint": "/api/notes",
      "method": "POST",
      "parameters": {
        "type": "object",
        "properties": {
          "title": {
            "type": "string",
            "description": "Title of the note (max 500 chars)",
            "maxLength": 500
          },
          "content": {
            "type": "string",
            "description": "Body content of the note (max 100,000 chars)",
            "maxLength": 100000
          },
          "category": {
            "type": "string",
            "description": "Category for organization (e.g., 'work', 'personal', 'real-estate')"
          },
          "tags": {
            "type": "array",
            "items": { "type": "string" },
            "description": "Array of tags for the note"
          },
          "priority": {
            "type": "string",
            "enum": ["low", "medium", "high"],
            "description": "Priority level"
          },
          "project": {
            "type": "string",
            "description": "Project name this note belongs to"
          }
        },
        "required": ["title", "content"]
      },
      "example": {
        "title": "Meeting with John about Maple St property",
        "content": "Discussed refinancing options with John Smith from ABC Bank. Property at 123 Maple St needs inspection before closing.",
        "category": "real-estate",
        "tags": ["refinance", "inspection"]
      }
    },
    {
      "name": "update_note",
      "description": "Update an existing note by ID. Only provided fields will be updated.",
      "endpoint": "/api/notes/{noteId}",
      "method": "PUT",
      "parameters": {
        "type": "object",
        "properties": {
          "noteId": {
            "type": "string",
            "description": "UUID of the note to update"
          },
          "title": {
            "type": "string",
            "description": "New title"
          },
          "content": {
            "type": "string",
            "description": "New content"
          },
          "category": {
            "type": "string",
            "description": "New category"
          },
          "tags": {
            "type": "array",
            "items": { "type": "string" },
            "description": "New tags array (replaces existing)"
          },
          "priority": {
            "type": "string",
            "enum": ["low", "medium", "high"]
          },
          "project": {
            "type": "string",
            "description": "Project name"
          }
        },
        "required": ["noteId"]
      },
      "example": {
        "noteId": "550e8400-e29b-41d4-a716-446655440000",
        "title": "Updated: Meeting with John",
        "tags": ["refinance", "inspection", "closing"]
      }
    },
    {
      "name": "delete_note",
      "description": "Delete a note by ID. This also removes all entity links.",
      "endpoint": "/api/notes/{noteId}",
      "method": "DELETE",
      "parameters": {
        "type": "object",
        "properties": {
          "noteId": {
            "type": "string",
            "description": "UUID of the note to delete"
          }
        },
        "required": ["noteId"]
      },
      "example": {
        "noteId": "550e8400-e29b-41d4-a716-446655440000"
      }
    },
    {
      "name": "get_note",
      "description": "Get a single note by ID, including linked entities (people, companies, projects).",
      "endpoint": "/api/notes/{noteId}",
      "method": "GET",
      "parameters": {
        "type": "object",
        "properties": {
          "noteId": {
            "type": "string",
            "description": "UUID of the note to retrieve"
          }
        },
        "required": ["noteId"]
      },
      "example": {
        "noteId": "550e8400-e29b-41d4-a716-446655440000"
      }
    },
    {
      "name": "search_notes",
      "description": "Search notes by text query, category, or linked entity. Returns notes with their linked entities.",
      "endpoint": "/api/notes",
      "method": "GET",
      "parameters": {
        "type": "object",
        "properties": {
          "search": {
            "type": "string",
            "description": "Text search query (searches title and content)"
          },
          "category": {
            "type": "string",
            "description": "Filter by category"
          },
          "person": {
            "type": "string",
            "description": "Filter by linked person ID"
          },
          "company": {
            "type": "string",
            "description": "Filter by linked company ID"
          },
          "project": {
            "type": "string",
            "description": "Filter by linked project ID"
          }
        }
      },
      "example": {
        "search": "refinance",
        "category": "real-estate"
      }
    },
    {
      "name": "semantic_search",
      "description": "Search notes using semantic similarity (AI-powered). Finds conceptually related notes even without exact keyword matches.",
      "endpoint": "/api/notes/semantic-search",
      "method": "POST",
      "parameters": {
        "type": "object",
        "properties": {
          "query": {
            "type": "string",
            "description": "Natural language search query"
          },
          "limit": {
            "type": "integer",
            "description": "Maximum number of results (default: 10, max: 50)",
            "default": 10,
            "maximum": 50
          }
        },
        "required": ["query"]
      },
      "example": {
        "query": "properties that need renovation work",
        "limit": 5
      }
    },
    {
      "name": "list_people",
      "description": "List all people in the CRM with their note counts. People are automatically extracted from notes.",
      "endpoint": "/api/people",
      "method": "GET",
      "parameters": {
        "type": "object",
        "properties": {}
      }
    },
    {
      "name": "create_person",
      "description": "Manually create a person entity. Usually not needed as people are auto-extracted from notes.",
      "endpoint": "/api/people",
      "method": "POST",
      "parameters": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string",
            "description": "Full name of the person",
            "maxLength": 200
          }
        },
        "required": ["name"]
      },
      "example": {
        "name": "John Smith"
      }
    },
    {
      "name": "list_companies",
      "description": "List all companies in the CRM with their note counts. Companies include banks, vendors, contractors, etc.",
      "endpoint": "/api/companies",
      "method": "GET",
      "parameters": {
        "type": "object",
        "properties": {}
      }
    },
    {
      "name": "create_company",
      "description": "Manually create a company entity. Usually not needed as companies are auto-extracted from notes.",
      "endpoint": "/api/companies",
      "method": "POST",
      "parameters": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string",
            "description": "Company name",
            "maxLength": 200
          },
          "type": {
            "type": "string",
            "description": "Company type (e.g., 'bank', 'contractor', 'vendor', 'agency')"
          }
        },
        "required": ["name"]
      },
      "example": {
        "name": "ABC Bank",
        "type": "bank"
      }
    },
    {
      "name": "list_projects",
      "description": "List all projects in the CRM with their note counts. Projects represent deals, developments, or initiatives.",
      "endpoint": "/api/projects",
      "method": "GET",
      "parameters": {
        "type": "object",
        "properties": {}
      }
    },
    {
      "name": "create_project",
      "description": "Manually create a project entity. Usually not needed as projects are auto-extracted from notes.",
      "endpoint": "/api/projects",
      "method": "POST",
      "parameters": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string",
            "description": "Project name",
            "maxLength": 200
          }
        },
        "required": ["name"]
      },
      "example": {
        "name": "Maple Street Development"
      }
    },
    {
      "name": "link_to_entity",
      "description": "Link a note to a person, company, or project. Can link by entity ID or by name (creates entity if needed).",
      "endpoint": "/api/notes/{noteId}/link",
      "method": "POST",
      "parameters": {
        "type": "object",
        "properties": {
          "noteId": {
            "type": "string",
            "description": "UUID of the note"
          },
          "type": {
            "type": "string",
            "enum": ["person", "company", "project"],
            "description": "Type of entity to link"
          },
          "entityId": {
            "type": "string",
            "description": "UUID of existing entity to link (use this OR name)"
          },
          "name": {
            "type": "string",
            "description": "Name of entity to link (creates if doesn't exist)"
          }
        },
        "required": ["noteId", "type"]
      },
      "example": {
        "noteId": "550e8400-e29b-41d4-a716-446655440000",
        "type": "person",
        "name": "Jane Doe"
      }
    },
    {
      "name": "unlink_from_entity",
      "description": "Remove a link between a note and an entity.",
      "endpoint": "/api/notes/{noteId}/link",
      "method": "DELETE",
      "parameters": {
        "type": "object",
        "properties": {
          "noteId": {
            "type": "string",
            "description": "UUID of the note"
          },
          "type": {
            "type": "string",
            "enum": ["person", "company", "project"],
            "description": "Type of entity to unlink"
          },
          "entityId": {
            "type": "string",
            "description": "UUID of entity to unlink"
          }
        },
        "required": ["noteId", "type", "entityId"]
      },
      "example": {
        "noteId": "550e8400-e29b-41d4-a716-446655440000",
        "type": "person",
        "entityId": "660e8400-e29b-41d4-a716-446655440001"
      }
    },
    {
      "name": "split_note",
      "description": "Split a single note into multiple new notes. Useful for breaking up long notes. Entity links are copied to all new notes.",
      "endpoint": "/api/notes/split",
      "method": "POST",
      "parameters": {
        "type": "object",
        "properties": {
          "noteId": {
            "type": "string",
            "description": "UUID of the note to split"
          },
          "splits": {
            "type": "array",
            "description": "Array of new notes to create (max 10)",
            "items": {
              "type": "object",
              "properties": {
                "title": {
                  "type": "string",
                  "description": "Title for new note"
                },
                "content": {
                  "type": "string",
                  "description": "Content for new note"
                },
                "category": {
                  "type": "string",
                  "description": "Optional category override"
                },
                "tags": {
                  "type": "array",
                  "items": { "type": "string" },
                  "description": "Optional tags override"
                }
              },
              "required": ["title", "content"]
            },
            "maxItems": 10
          },
          "deleteOriginal": {
            "type": "boolean",
            "description": "Whether to delete the original note after splitting",
            "default": false
          }
        },
        "required": ["noteId", "splits"]
      },
      "example": {
        "noteId": "550e8400-e29b-41d4-a716-446655440000",
        "splits": [
          {
            "title": "Financing Discussion",
            "content": "Discussed refinancing options with John Smith..."
          },
          {
            "title": "Property Inspection",
            "content": "Property at 123 Maple St needs inspection..."
          }
        ],
        "deleteOriginal": true
      }
    },
    {
      "name": "merge_notes",
      "description": "Merge multiple notes into a single new note. Combines content, merges all entity links, and deletes originals.",
      "endpoint": "/api/notes/merge",
      "method": "POST",
      "parameters": {
        "type": "object",
        "properties": {
          "noteIds": {
            "type": "array",
            "description": "Array of note UUIDs to merge (2-20 notes)",
            "items": { "type": "string" },
            "minItems": 2,
            "maxItems": 20
          },
          "newTitle": {
            "type": "string",
            "description": "Title for the merged note"
          },
          "separator": {
            "type": "string",
            "description": "Text to insert between merged content",
            "default": "\n\n---\n\n"
          }
        },
        "required": ["noteIds", "newTitle"]
      },
      "example": {
        "noteIds": [
          "550e8400-e29b-41d4-a716-446655440000",
          "550e8400-e29b-41d4-a716-446655440001"
        ],
        "newTitle": "Combined Meeting Notes - Maple St Project"
      }
    },
    {
      "name": "clarify_note",
      "description": "Provide additional context for a note that was flagged as vague. Triggers re-enrichment with the new context.",
      "endpoint": "/api/notes/clarify",
      "method": "POST",
      "parameters": {
        "type": "object",
        "properties": {
          "noteId": {
            "type": "string",
            "description": "UUID of the note needing clarification"
          },
          "context": {
            "type": "string",
            "description": "Additional context to help enrich the note (e.g., full names, company names, project details)"
          }
        },
        "required": ["noteId", "context"]
      },
      "example": {
        "noteId": "550e8400-e29b-41d4-a716-446655440000",
        "context": "John is John Smith from ABC Bank. The property is at 123 Maple St for the Maple Street Development project."
      }
    },
    {
      "name": "get_pending_clarifications",
      "description": "List notes that need additional context/clarification for proper entity extraction.",
      "endpoint": "/api/notes/clarify",
      "method": "GET",
      "parameters": {
        "type": "object",
        "properties": {}
      }
    },
    {
      "name": "get_stats",
      "description": "Get statistics about the notes database including counts by category and enrichment status.",
      "endpoint": "/api/notes/stats",
      "method": "GET",
      "parameters": {
        "type": "object",
        "properties": {}
      }
    },
    {
      "name": "suggest_projects",
      "description": "Get project suggestions for a note based on extracted entities, shared entities with other project notes, keyword matching, and semantic similarity.",
      "endpoint": "/api/notes/{noteId}/suggest-projects",
      "method": "GET",
      "parameters": {
        "type": "object",
        "properties": {
          "noteId": {
            "type": "string",
            "description": "UUID of the note to get project suggestions for"
          }
        },
        "required": ["noteId"]
      },
      "example": {
        "noteId": "550e8400-e29b-41d4-a716-446655440000"
      }
    },
    {
      "name": "get_usage",
      "description": "Get token usage statistics for AI enrichment operations. Tracks OpenAI API costs.",
      "endpoint": "/api/usage",
      "method": "GET",
      "parameters": {
        "type": "object",
        "properties": {
          "period": {
            "type": "string",
            "enum": ["today", "week", "month", "all"],
            "description": "Time period for usage stats",
            "default": "today"
          },
          "noteId": {
            "type": "string",
            "description": "Optional: Get usage for a specific note instead of time period"
          }
        }
      },
      "example": {
        "period": "month"
      }
    },
    {
      "name": "list_templates",
      "description": "List all note templates for the user. Templates provide default values for creating new notes.",
      "endpoint": "/api/templates",
      "method": "GET",
      "parameters": {
        "type": "object",
        "properties": {}
      }
    },
    {
      "name": "create_template",
      "description": "Create a new note template with default title, content, category, and tags. When creating notes with a templateId, these values are used as defaults.",
      "endpoint": "/api/templates",
      "method": "POST",
      "parameters": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string",
            "description": "Template name (unique per user, max 100 chars)",
            "maxLength": 100
          },
          "title_template": {
            "type": "string",
            "description": "Default title for notes created from this template"
          },
          "content_template": {
            "type": "string",
            "description": "Default content for notes created from this template"
          },
          "default_category": {
            "type": "string",
            "description": "Default category for notes created from this template"
          },
          "default_tags": {
            "type": "array",
            "items": { "type": "string" },
            "description": "Default tags for notes created from this template"
          }
        },
        "required": ["name"]
      },
      "example": {
        "name": "Meeting Notes",
        "title_template": "Meeting: ",
        "content_template": "## Attendees\n\n## Agenda\n\n## Action Items\n",
        "default_category": "meetings",
        "default_tags": ["meeting"]
      }
    },
    {
      "name": "delete_template",
      "description": "Delete a note template by ID.",
      "endpoint": "/api/templates",
      "method": "DELETE",
      "parameters": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "description": "UUID of the template to delete"
          }
        },
        "required": ["id"]
      },
      "example": {
        "id": "550e8400-e29b-41d4-a716-446655440000"
      }
    },
    {
      "name": "create_note_from_template",
      "description": "Create a new note using a template's defaults. User-provided values override template defaults.",
      "endpoint": "/api/notes",
      "method": "POST",
      "parameters": {
        "type": "object",
        "properties": {
          "templateId": {
            "type": "string",
            "description": "UUID of the template to use for defaults"
          },
          "title": {
            "type": "string",
            "description": "Override the template's default title"
          },
          "content": {
            "type": "string",
            "description": "Override the template's default content"
          },
          "category": {
            "type": "string",
            "description": "Override the template's default category"
          },
          "tags": {
            "type": "array",
            "items": { "type": "string" },
            "description": "Override the template's default tags"
          },
          "priority": {
            "type": "string",
            "enum": ["low", "medium", "high"],
            "description": "Priority level"
          },
          "project": {
            "type": "string",
            "description": "Project name this note belongs to"
          }
        },
        "required": ["templateId"]
      },
      "example": {
        "templateId": "550e8400-e29b-41d4-a716-446655440000",
        "title": "Meeting: Q1 Planning with John"
      }
    },
    {
      "name": "list_categories",
      "description": "List all unique categories used across notes. Useful for filtering or suggesting categories.",
      "endpoint": "/api/categories",
      "method": "GET",
      "parameters": {
        "type": "object",
        "properties": {}
      }
    },
    {
      "name": "get_issues",
      "description": "Get system issues report: notes without categories/tags/embeddings, stalled enrichment, pending clarifications, duplicate entities. Returns severity-sorted issues for data quality monitoring.",
      "endpoint": "/api/issues",
      "method": "GET",
      "parameters": {
        "type": "object",
        "properties": {}
      }
    },
    {
      "name": "health_check",
      "description": "Check API and database health status. Returns app status, database connectivity, and version. Does not require authentication.",
      "endpoint": "/api/health",
      "method": "GET",
      "parameters": {
        "type": "object",
        "properties": {}
      }
    }
  ]
}
